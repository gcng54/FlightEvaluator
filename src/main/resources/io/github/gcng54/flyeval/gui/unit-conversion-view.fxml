<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.text.Font?>

<GridPane hgap="10" vgap="8" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
          fx:controller="io.github.gcng54.flyeval.gui.UnitConversionController">
  <padding>
    <Insets top="10" right="10" bottom="10" left="10"/>
  </padding>
  <columnConstraints>
    <ColumnConstraints prefWidth="150"/>
    <ColumnConstraints prefWidth="180" hgrow="SOMETIMES"/>
    <ColumnConstraints prefWidth="180" hgrow="SOMETIMES"/>
  </columnConstraints>
  <rowConstraints>
    <RowConstraints/> <!-- Dimension -->
    <RowConstraints/> <!-- From -->
    <RowConstraints/> <!-- To -->
    <RowConstraints/> <!-- Error -->
    <RowConstraints/> <!-- Separator -->
    <RowConstraints/> <!-- Refraction Title -->
    <RowConstraints/> <!-- Site Altitude -->
    <RowConstraints/> <!-- Target Altitude -->
    <RowConstraints/> <!-- Site Pressure -->
    <RowConstraints/> <!-- Site Temperature -->
    <RowConstraints/> <!-- Site RH -->
    <RowConstraints/> <!-- Calculate Button -->
    <RowConstraints/> <!-- k-Factor Result -->
  </rowConstraints>
  <!-- Row 0: Dimension Selection -->
  <Label text="Dimension" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
  <ComboBox fx:id="dimensionComboBox" prefWidth="Infinity" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
  <!-- Row 1: Source Value and Unit -->
  <Label text="From" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
  <TextField fx:id="sourceValueField" promptText="Enter value" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
  <ComboBox fx:id="sourceUnitComboBox" prefWidth="Infinity" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
  <!-- Row 2: Target Value and Unit -->
  <Label text="To" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
  <TextField fx:id="targetValueField" editable="false" promptText="Result" GridPane.rowIndex="2"
                 GridPane.columnIndex="1"/>
  <ComboBox fx:id="targetUnitComboBox" prefWidth="Infinity" GridPane.rowIndex="2" GridPane.columnIndex="2"/>
  <!-- Row 3: Error Label -->
  <Label fx:id="errorLabel" style="-fx-text-fill: red;" GridPane.columnSpan="3" GridPane.rowIndex="3"/>

  <!-- Refraction Section -->
  <Separator GridPane.rowIndex="4" GridPane.columnSpan="3" GridPane.halignment="CENTER">
    <padding>
      <Insets top="15" bottom="5"/>
    </padding>
  </Separator>

  <Label text="Atmospheric Refraction" GridPane.rowIndex="5" GridPane.columnSpan="3">
    <font><Font name="System Bold" size="13.0" /></font>
  </Label>

  <Label text="Site Altitude" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
  <TextField fx:id="siteAltField" promptText="e.g., 100" GridPane.rowIndex="6" GridPane.columnIndex="1"/>
  <ComboBox fx:id="siteAltUnitCombo" prefWidth="Infinity" GridPane.rowIndex="6" GridPane.columnIndex="2"/>

  <Label text="Target Altitude" GridPane.rowIndex="7" GridPane.columnIndex="0"/>
  <TextField fx:id="targetAltField" promptText="e.g., 5000" GridPane.rowIndex="7" GridPane.columnIndex="1"/>
  <ComboBox fx:id="targetAltUnitCombo" prefWidth="Infinity" GridPane.rowIndex="7" GridPane.columnIndex="2"/>

  <Label text="Site Pressure (Optional)" GridPane.rowIndex="8" GridPane.columnIndex="0"/>
  <TextField fx:id="sitePressureField" promptText="e.g., 1013.25" GridPane.rowIndex="8" GridPane.columnIndex="1"/>
  <ComboBox fx:id="sitePressureUnitCombo" prefWidth="Infinity" GridPane.rowIndex="8" GridPane.columnIndex="2"/>

  <Label text="Site Temperature (Optional)" GridPane.rowIndex="9" GridPane.columnIndex="0"/>
  <TextField fx:id="siteTempField" promptText="e.g., 15" GridPane.rowIndex="9" GridPane.columnIndex="1"/>
  <ComboBox fx:id="siteTempUnitCombo" prefWidth="Infinity" GridPane.rowIndex="9" GridPane.columnIndex="2"/>

  <Label text="Site Rel. Humidity (Optional)" GridPane.rowIndex="10" GridPane.columnIndex="0"/>
  <TextField fx:id="siteRhField" promptText="e.g., 60" GridPane.rowIndex="10" GridPane.columnIndex="1"/>
  <Label text="\%" GridPane.rowIndex="10" GridPane.columnIndex="2"/>

  <Button text="Calculate k-Factor" onAction="#handleCalculateKFactor" GridPane.rowIndex="11" GridPane.columnIndex="1"/>

  <Label text="Resulting k-Factor" GridPane.rowIndex="12" GridPane.columnIndex="0"/>
  <TextField fx:id="kFactorResultField" editable="false" promptText="k-Factor" GridPane.rowIndex="12" GridPane.columnIndex="1"/>

  <Label fx:id="kFactorErrorLabel" style="-fx-text-fill: red;" GridPane.columnSpan="3" GridPane.rowIndex="13"/>

</GridPane>
